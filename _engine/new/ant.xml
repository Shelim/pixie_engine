<project name="new project" basedir="..">
	
	<property name="unix" value="game" />
	<property name="full" value="Sample game" />
	<property name="app_type" value="executable" />
	<property name="app_src" value="empty" />
	
	<target name="replace_variables">
		<replace token="$EMPTY_UNIX_NAME$" value="${unix}"><fileset dir="${replace_variables.file}" /></replace>
		<replace token="$EMPTY_NAME$" value="${full}"><fileset dir="${replace_variables.file}" /></replace>
		<replace token="$EMPTY_TYPE$" value="${app_type}"><fileset dir="${replace_variables.file}" /></replace>
	</target>
	
	<target name="new_project">
		<copy todir="../${unix}" includeEmptyDirs="true"> 
			<fileset dir="new/project" defaultexcludes="no" /> 
			
			<mapper>
				<mapper type="regexp" from="(.*)$EMPTY_UNIX_NAME$(.*)" to="\1${unix}\2"/>
				<mapper type="regexp" from="(.*)$EMPTY_NAME$(.*)" to="\1${full}\2"/>
				<mapper type="regexp" from="(.*)$full$(.*)" to="\1${app_type}\2"/>
				<mapper type="identity"/>
			</mapper>
		</copy>
		<copy file="new/build_gitignore" tofile="../${unix}/.gitignore" />
		
		<antcall target="replace_variables">
			<param name="replace_variables.file" value="../${unix}" />
		</antcall>
	</target>
	
	
	<target name="new_application">
		<mkdir dir="../${app_src}" />
		<copy todir="../${app_src}" includeEmptyDirs="true" overwrite="true"> 
			<fileset dir="new/application/common" defaultexcludes="no" /> 
			<fileset dir="new/application/${app_type}" defaultexcludes="no" /> 
			
			<mapper>
				<mapper type="regexp" from="(.*)\$EMPTY_UNIX_NAME\$(.*)" to="\1${unix}\2"/>
				<mapper type="regexp" from="(.*)\$EMPTY_NAME\$(.*)" to="\1${full}\2"/>
				<mapper type="regexp" from="(.*)\$EMPTY_TYPE\$(.*)" to="\1${app_type}\2"/>
				<mapper type="identity"/>
			</mapper>
			
		</copy>
		
		<antcall target="replace_variables">
			<param name="replace_variables.file" value="../${app_src}" />
		</antcall>
				
	</target>
	
</project>